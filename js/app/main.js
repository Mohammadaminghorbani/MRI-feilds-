(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("electron"),o=require("path");var n=e.n(o);const r=require("url");var s=e.n(r);const a=require("child_process"),i=require("promise-delegate"),l=require("fs-jetpack");var c=e.n(l);let d,p=new i.PromiseDelegate;d=(0,a.spawn)("./autorad",{cwd:n().join(process.resourcesPath,"python")}),d.stdout.once("data",(e=>{const t=JSON.parse(`${e}`).port;p.resolve(t)})),d.stderr.on("data",(e=>{console.log(`${e}`)})),d.stdout.on("data",(e=>{console.log(`${e}`)})),t.app.on("web-contents-created",((e,o)=>{o.on("will-navigate",((e,o)=>{e.preventDefault();const n=new(s().URL)(o);["https:","http:","mailto:"].includes(n.protocol)&&t.shell.openExternal(o)}))})),t.app.on("ready",(()=>{t.Menu.setApplicationMenu(null);const e=((e,o)=>{const n=c().cwd(t.app.getPath("userData")),r=`window-state-${e}.json`,s={width:o.width,height:o.height};let a,i={};return i=(e=>{const o=t.screen.getAllDisplays().some((t=>((e,t)=>e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height)(e,t.bounds)));return o?e:(()=>{const e=t.screen.getPrimaryDisplay().bounds;return Object.assign({},s,{x:(e.width-s.width)/2,y:(e.height-s.height)/2})})()})((()=>{let e={};try{e=n.read(r,"json")}catch(e){}return Object.assign({},s,e)})()),a=new t.BrowserWindow(Object.assign({},o,i)),a.on("close",(()=>{a.isMinimized()||a.isMaximized()||Object.assign(i,(()=>{const e=a.getPosition(),t=a.getSize();return{x:e[0],y:e[1],width:t[0],height:t[1]}})()),n.write(r,i,{atomic:!0})})),a})("main",{width:1400,height:865,webPreferences:{preload:n().join(__dirname,"preload.js")}});p.promise.then((t=>{const o=s().format({pathname:`localhost:${t}`,protocol:"http:",slashes:!0});e.loadURL(o)}))})),t.app.on("before-quit",(function(){d.kill()})),t.app.on("window-all-closed",(()=>{t.app.quit()}))})();
//# sourceMappingURL=main.js.map